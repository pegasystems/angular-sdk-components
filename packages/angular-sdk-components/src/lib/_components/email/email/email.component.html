<!-- <div *nfFor></div>
<component-mapper name="SummaryItem" [props]="{ item$: item, menuIconOverride$, menuIconOverrideAction$ }" [content]>
  <ng-template #content>
    <ng-content class="primary"> -->
<!-- from email to be displayed using field value list-->
<!-- <component-mapper name="Text" [props]="{ value$: from.fullName, displayMode$: 'DISPLAY_ONLY' }"></component-mapper>
      <link>
      <text>
    </ng-content>
    <ng-content class="secondary"> -->
<!-- iteratee over to list, use field value list to create a text-->
<!-- add date and combine both text and date-->
<!-- <text>
    </ng-content>
    <ng-content class="actions"></ng-content>
  </ng-template>
</component-mapper> -->
<mat-card class="email-card">
  <mat-card-header>
    <div mat-card-avatar>
      <mat-icon>person</mat-icon>
    </div>
    <mat-card-title>
      <span>{{ from.fullName }}</span>
      <mat-icon *ngIf="sentiment">{{ sentiment.icon }}</mat-icon>
      <mat-chip *ngIf="status" [color]="status === 'draft' ? 'warn' : 'primary'">{{ status }}</mat-chip>
    </mat-card-title>
    <mat-card-subtitle>
      <span>{{ getEmailDisplayList(to.slice(0, 2), false) }}</span>
      <span *ngIf="to.length > 2">; +{{ to.length - 2 }} more</span>
      <span>{{ timeStamp | date: 'short' }}</span>
    </mat-card-subtitle>
    <span *ngIf="status" class="psdk-csf-status-style">{{ status }}</span>
    <!-- needs work in styling and value to be shown-->
    <button mat-icon-button [matMenuTriggerFor]="emailMoreInfoMenu">
      <img class="psdk-list-view-svg-icon" src="{{ showMoreSvg }}" />
      <!-- <mat-icon>arrow-micro-down</mat-icon> -->
    </button>
    <mat-menu #emailMoreInfoMenu="matMenu">
      <ng-container *ngFor="let field of getEmailMoreInfoFields()">
        <button mat-menu-item>{{ field.name }}: {{ field.value }}</button>
      </ng-container>
    </mat-menu>
  </mat-card-header>
  <div *ngIf="banner"><component-mapper name="AlertBanner" [props]="{ banner }"></component-mapper></div>
  <mat-card-content>
    <div [innerHTML]="body"></div>
    <div *ngIf="trail">
      <button mat-button (click)="trail.onExpandCollapse(id)">
        <mat-icon>more-alt</mat-icon>
        {{ trail.expanded ? 'Collapse Trail' : 'Expand Trail' }}
      </button>
      <div *ngIf="trail.expanded">
        <div *ngIf="trail.content" [innerHTML]="trail.content"></div>
        <mat-progress-bar *ngIf="trail.loading" mode="indeterminate"></mat-progress-bar>
      </div>
    </div>
  </mat-card-content>
  <mat-card-actions>
    <button *ngFor="let action of getActions()" mat-icon-button (click)="action.onClick()">
      <!-- use image and path-->
      <img class="psdk-list-view-svg-icon" src="{{ action.icon }}" />
      <!-- <mat-icon>{{ action.icon }}</mat-icon> -->
    </button>
  </mat-card-actions>
</mat-card>

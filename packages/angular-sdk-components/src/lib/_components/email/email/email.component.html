<!-- <div *nfFor></div>
<component-mapper name="SummaryItem" [props]="{ item$: item, menuIconOverride$, menuIconOverrideAction$ }" [content]>
  <ng-template #content>
    <ng-content class="primary"> -->
<!-- from email to be displayed using field value list-->
<!-- <component-mapper name="Text" [props]="{ value$: from.fullName, displayMode$: 'DISPLAY_ONLY' }"></component-mapper>
      <link>
      <text>
    </ng-content>
    <ng-content class="secondary"> -->
<!-- iteratee over to list, use field value list to create a text-->
<!-- add date and combine both text and date-->
<!-- <text>
    </ng-content>
    <ng-content class="actions"></ng-content>
  </ng-template>
</component-mapper> -->
<mat-card *ngIf="email" class="email-card">
  <mat-card-header>
    <div mat-card-avatar>
      <mat-icon>person</mat-icon>
    </div>
    <mat-card-title>
      <span>{{ email.from.fullName }}</span>
      <mat-icon *ngIf="email.sentiment">{{ email.sentiment.icon }}</mat-icon>
      <mat-chip *ngIf="email.status" [color]="email.status === 'draft' ? 'warn' : 'primary'">{{ email.status }}</mat-chip>
    </mat-card-title>
    <mat-card-subtitle>
      <span>{{ getEmailDisplayList(email.to.slice(0, 2), false) }}</span>
      <span *ngIf="email.to.length > 2">; +{{ email.to.length - 2 }} more</span>
      <span>{{ email.timeStamp | date: 'short' }}</span>
    </mat-card-subtitle>
    <span *ngIf="email.status" class="psdk-csf-status-style">{{ email.status }}</span>
    <!-- needs work in styling and value to be shown-->
    <button mat-icon-button [matMenuTriggerFor]="emailMoreInfoMenu">
      <img class="psdk-list-view-svg-icon" src="{{ showMoreSvg }}" />
      <!-- <mat-icon>arrow-micro-down</mat-icon> -->
    </button>
    <mat-menu #emailMoreInfoMenu="matMenu">
      <ng-container *ngFor="let field of getEmailMoreInfoFields()">
        <button mat-menu-item>{{ field.name }}: {{ field.value }}</button>
      </ng-container>
    </mat-menu>
  </mat-card-header>
  <div *ngIf="email.banner"><component-mapper name="AlertBanner" [props]="{ banner: email.banner }"></component-mapper></div>
  <mat-card-content>
    <div [innerHTML]="email.body"></div>
    <div *ngIf="email.trail">
      <button mat-button (click)="email.trail.onExpandCollapse(email.id)">
        <mat-icon>more-alt</mat-icon>
        {{ email.trail.expanded ? 'Collapse Trail' : 'Expand Trail' }}
      </button>
      <div *ngIf="email.trail.expanded">
        <div *ngIf="email.trail.content" [innerHTML]="email.trail.content"></div>
        <mat-progress-bar *ngIf="email.trail.loading" mode="indeterminate"></mat-progress-bar>
      </div>
    </div>
  </mat-card-content>
  <mat-card-actions>
    <button *ngFor="let action of getActions()" mat-icon-button (click)="action.onClick()">
      <!-- use image and path-->
      <img class="psdk-list-view-svg-icon" src="{{ action.icon }}" />
      <!-- <mat-icon>{{ action.icon }}</mat-icon> -->
    </button>
  </mat-card-actions>
</mat-card>
